/// <reference types="./mod.d.ts" />
var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e="function"==typeof Object.defineProperty?Object.defineProperty:null;var n=function(){try{return e({},"x",{}),!0}catch(t){return!1}},r=Object.defineProperty,i=Object.prototype,o=i.toString,a=i.__defineGetter__,u=i.__defineSetter__,s=i.__lookupGetter__,l=i.__lookupSetter__;var f=function(t,e,n){var r,f,h,c;if("object"!=typeof t||null===t||"[object Array]"===o.call(t))throw new TypeError("invalid argument. First argument must be an object. Value: `"+t+"`.");if("object"!=typeof n||null===n||"[object Array]"===o.call(n))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+n+"`.");if((f="value"in n)&&(s.call(t,e)||l.call(t,e)?(r=t.__proto__,t.__proto__=i,delete t[e],t[e]=n.value,t.__proto__=r):t[e]=n.value),h="get"in n,c="set"in n,f&&(h||c))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return h&&a&&a.call(t,e,n.get),c&&u&&u.call(t,e,n.set),t},h=r,c=f,v=n()?h:c,y=v;var d=function(t,e,n){y(t,e,{configurable:!1,enumerable:!1,writable:!1,value:n})},p=d;var g=function(t){return"number"==typeof t};var w=function(){return"function"==typeof Symbol&&"symbol"==typeof Symbol("foo")}();var m=function(){return w&&"symbol"==typeof Symbol.toStringTag},b=Object.prototype.toString,E=b;var A=function(t){return E.call(t)},T=Object.prototype.hasOwnProperty;var O=function(t,e){return null!=t&&T.call(t,e)},M="function"==typeof Symbol?Symbol.toStringTag:"",N=O,_=M,P=b;var S=A,I=function(t){var e,n,r;if(null==t)return P.call(t);n=t[_],e=N(t,_);try{t[_]=void 0}catch(e){return P.call(t)}return r=P.call(t),e?t[_]=n:delete t[_],r},j=m()?I:S,L=Number,R=L.prototype.toString;var Y=j,C=L,B=function(t){try{return R.call(t),!0}catch(t){return!1}},D=m();var U=function(t){return"object"==typeof t&&(t instanceof C||(D?B(t):"[object Number]"===Y(t)))},x=g,V=U;var F=p,G=function(t){return x(t)||V(t)},W=U;F(G,"isPrimitive",g),F(G,"isObject",W);var J=G,K=Number.POSITIVE_INFINITY,k=L.NEGATIVE_INFINITY,z=Math.floor,X=z;var q=function(t){return X(t)===t},H=K,$=k,Q=q;var Z=function(t){return t<H&&t>$&&Q(t)},tt=J.isPrimitive,et=Z;var nt=function(t){return tt(t)&&et(t)},rt=J.isObject,it=Z;var ot=function(t){return rt(t)&&it(t.valueOf())},at=nt,ut=ot;var st=p,lt=function(t){return at(t)||ut(t)},ft=ot;st(lt,"isPrimitive",nt),st(lt,"isObject",ft);var ht=lt,ct=ht.isPrimitive;var vt=function(t){return ct(t)&&t>=0},yt=ht.isObject;var dt=function(t){return yt(t)&&t.valueOf()>=0},pt=vt,gt=dt;var wt=p,mt=function(t){return pt(t)||gt(t)},bt=dt;wt(mt,"isPrimitive",vt),wt(mt,"isObject",bt);var Et=mt,At=ht.isPrimitive;var Tt=function(t){return At(t)&&t>0},Ot=ht.isObject;var Mt=function(t){return Ot(t)&&t.valueOf()>0},Nt=Tt,_t=Mt;var Pt=p,St=function(t){return Nt(t)||_t(t)},It=Mt;Pt(St,"isPrimitive",Tt),Pt(St,"isObject",It);var jt=St,Lt=j;var Rt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Lt(t)},Yt=Rt;var Ct=function(t){if("function"!=typeof t)throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return function(e){var n,r;if(!Yt(e))return!1;if(0===(n=e.length))return!1;for(r=0;r<n;r++)if(!1===t(e[r]))return!1;return!0}};var Bt=function(t){return"string"==typeof t},Dt=String.prototype.valueOf;var Ut=j,xt=function(t){try{return Dt.call(t),!0}catch(t){return!1}},Vt=m();var Ft=function(t){return"object"==typeof t&&(t instanceof String||(Vt?xt(t):"[object String]"===Ut(t)))},Gt=Bt,Wt=Ft;var Jt=p,Kt=function(t){return Gt(t)||Wt(t)},kt=Ft;Jt(Kt,"isPrimitive",Bt),Jt(Kt,"isObject",kt);var zt=Kt,Xt=p,qt=Ct,Ht=zt,$t=qt(Ht);Xt($t,"primitives",qt(Ht.isPrimitive)),Xt($t,"objects",qt(Ht.isObject));var Qt=$t,Zt=v;var te=function(t,e,n){Zt(t,e,{configurable:!1,enumerable:!0,writable:!1,value:n})},ee=te,ne=q;var re=function(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length&&ne(t.length)&&t.length>=0&&t.length<=9007199254740991};var ie=function(t){return t!=t},oe=J.isPrimitive,ae=ie;var ue=function(t){return oe(t)&&ae(t)},se=J.isObject,le=ie;var fe=function(t){return se(t)&&le(t.valueOf())},he=ue,ce=fe;var ve=p,ye=function(t){return he(t)||ce(t)},de=fe;ve(ye,"isPrimitive",ue),ve(ye,"isObject",de);var pe=re,ge=ht.isPrimitive,we=zt.isPrimitive,me=ye.isPrimitive;var be=function(t,e,n){var r,i,o;if(!pe(t)&&!we(t))throw new TypeError("invalid argument. First argument must be array-like. Value: `"+t+"`.");if(arguments.length<2)throw new Error("insufficient input arguments. Must provide a search value.");if(arguments.length>2){if(!ge(n))throw new TypeError("invalid argument. Third argument must be an integer. Value: `"+n+"`.");(i=n)<0&&(i=0)}else i=0;if(we(t)){if(!we(e))throw new TypeError("invalid argument. Second argument must be a string primitive. Value: `"+e+"`.");return-1!==t.indexOf(e,i)}if(r=t.length,me(e)){for(o=i;o<r;o++)if(me(t[o]))return!0;return!1}for(o=i;o<r;o++)if(t[o]===e)return!0;return!1};var Ee=function(t){return"boolean"==typeof t},Ae=Boolean.prototype.toString;var Te=j,Oe=function(t){try{return Ae.call(t),!0}catch(t){return!1}},Me=m();var Ne=function(t){return"object"==typeof t&&(t instanceof Boolean||(Me?Oe(t):"[object Boolean]"===Te(t)))},_e=Ee,Pe=Ne;var Se=p,Ie=function(t){return _e(t)||Pe(t)},je=Ne;Se(Ie,"isPrimitive",Ee),Se(Ie,"isObject",je);var Le=Ie,Re=Le.isPrimitive,Ye=zt.isPrimitive,Ce=O,Be={"i.e.":["i.e."],"I.e.":["I.e."],"I.E.":["I.E."],"e.g.":["e.g."],"E.g.":["E.g."],"E.G.":["E.G."],"et al.":["et al."],"etc.":["etc."],"vs.":["vs."],"A.S.A.P":["A.S.A.P"],"E.T.A.":["E.T.A."],"D.I.Y":["D.I.Y"],"R.S.V.P":["R.S.V.P"],"P.S.":["P.S."],"B.Y.O.B":["B.Y.O.B"],"Ms.":["Ms."],"Mr.":["Mr."],"Dr.":["Dr."],"Prof.":["Prof."],"Mrs.":["Mrs."],"Messrs.":["Messrs."],"Gov.":["Gov."],"Gen.":["Gen."],"Lt.":["Lt."],"Col.":["Col."],"Mt.":["Mt."],"Bros.":["Bros."],"Corp.":["Corp."],"Co.":["Co."],"co.":["co."],"Inc.":["Inc."],"Ltd.":["Ltd."],"Rep.":["Rep."],"Sen.":["Sen."],"Jr.":["Jr."],"Sr.":["Sr."],"Ph.D.":["Ph.D."],"J.D.":["J.D."],"M.D.":["M.D."],"Rev.":["Rev."],"Adm.":["Adm."],"St.":["St."],"a.m.":["a.m."],"p.m.":["p.m."],"b.c.":["b.c."],"B.C.":["B.C."],"a.d.":["a.d."],"A.D.":["A.D."],"b.c.e.":["b.c.e."],"B.C.E.":["B.C.E."],"Jan.":["Jan."],"Feb.":["Feb."],"Mar.":["Mar."],"Apr.":["Apr."],"May.":["May."],"Jun.":["Jun."],"Jul.":["Jul."],"Aug.":["Aug."],"Sep.":["Sep."],"Sept.":["Sept."],"Oct.":["Oct."],"Nov.":["Nov."],"Dec.":["Dec."],"Ala.":["Ala."],"Ariz.":["Ariz."],"Ark.":["Ark."],"Calif.":["Calif."],"Colo.":["Colo."],"Conn.":["Conn."],"Del.":["Del."],"D.C.":["D.C."],"Fla.":["Fla."],"Ga.":["Ga."],"Ill.":["Ill."],"Ind.":["Ind."],"Kans.":["Kans."],"Kan.":["Kan."],"Ky.":["Ky."],"La.":["La."],"Md.":["Md."],"Mass.":["Mass."],"Mich.":["Mich."],"Minn.":["Minn."],"Miss.":["Miss."],"Mo.":["Mo."],"Mont.":["Mont."],"Nebr.":["Nebr."],"Neb.":["Neb."],"Nev.":["Nev."],"N.H.":["N.H."],"N.J.":["N.J."],"N.M.":["N.M."],"N.Y.":["N.Y."],"N.C.":["N.C."],"N.D.":["N.D."],"Okla.":["Okla."],"Ore.":["Ore."],"Pa.":["Pa."],"Tenn.":["Tenn."],"Va.":["Va."],"Wash.":["Wash."],"Wis.":["Wis."]},De={"^_^":["^_^"],"=D":["=D"],";-p":[";-p"],":O":[":O"],":-/":[":-/"],xD:["xD"],V_V:["V_V"],";(":[";("],"(:":["(:"],'")':['")'],":Y":[":Y"],":]":[":]"],":3":[":3"],":(":[":("],":-)":[":-)"],"=3":["=3"],":))":[":))"],":>":[":>"],";p":[";p"],":p":[":p"],"=[[":["=[["],xDD:["xDD"],"<333":["<333"],"<33":["<33"],":P":[":P"],"o.O":["o.O"],"<3":["<3"],";-)":[";-)"],":)":[":)"],"-_-":["-_-"],":')":[":')"],o_O:["o_O"],";)":[";)"],"=]":["=]"],"(=":["(="],"-__-":["-__-"],":/":[":/"],":0":[":0"],"(^_^)":["(^_^)"],";D":[";D"],o_o:["o_o"],":((":[":(("],"=)":["=)"]},Ue={"'s":["'s"],"'S":["'S"],"ain't":["ai","n't"],aint:["ai","nt"],"Ain't":["Ai","n't"],"aren't":["are","n't"],arent:["are","nt"],"Aren't":["Are","n't"],"can't":["ca","n't"],cant:["ca","nt"],"Can't":["Ca","n't"],"can't've":["ca","n't","'ve"],"'cause":["'cause'"],cannot:["can","not"],Cannot:["Can","not"],"could've":["could","'ve"],couldve:["could","ve"],"Could've":["Could","'ve"],"couldn't":["could","n't"],couldnt:["could","nt"],"Couldn't":["Could","n't"],"couldn't've":["could","n't","'ve"],couldntve:["could","nt","ve"],"Couldn't've":["Could","n't","'ve"],"didn't":["did","n't"],didnt:["did","nt"],"Didn't":["Did","n't"],"doesn't":["does","n't"],doesnt:["does","nt"],"Doesn't":["Does","n't"],"don't":["do","n't"],dont:["do","nt"],"Don't":["Do","n't"],"hadn't":["had","n't"],hadnt:["had","nt"],"Hadn't":["Had","n't"],"hadn't've":["had","n't","'ve"],"hasn't":["has","n't"],hasnt:["has","nt"],"haven't":["have","n't"],havent:["have","nt"],"he'd":["he","'d"],hed:["he","d"],"he'd've":["he","'d","'ve"],hedve:["he","d","ve"],"he'll":["he","'ll"],"he'll've":["he","'ll","'ve"],"he's":["he","'s"],hes:["he","s"],"how'd":["how","'d"],howd:["how","d"],"how'd'y":["how","'d","'y"],"how'll":["how","'ll"],howll:["how","ll"],"how's":["how","'s"],hows:["how","s"],"I'd":["I","'d"],"I'd've":["I","'d","'ve"],"I'll":["I","'ll"],"i'll":["i","'ll"],"I'll've":["I","'ll","'ve"],"i'll've":["i","'ll","'ve"],"I'm":["I","'m"],"i'm":["i","'m"],Im:["I","m"],im:["i","m"],"I'ma":["I","'ma"],"i'ma":["i","'ma"],"I've":["I","'ve"],"i've":["i","'ve"],"isn't":["is","n't"],isnt:["is","nt"],"Isn't":["Is","n't"],"It'd":["It","'d"],"it'd":["it","'d"],"it'd've":["it","'d","'ve"],"it'll've":["it","'ll","'ve"],"it'll":["it","'ll"],itll:["it","ll"],"it's":["it","'s"],"let's":["let","'s"],lets:["let","s"],"ma'am":["ma'am"],"mayn't":["may","n't"],"mightn't":["might","n't"],"mightn't've":["might","n't","'ve"],"might've":["might","'ve"],"mustn't":["must","n't"],"mustn't've":["must","n't","'ve"],"must've":["must","'ve"],"needn't":["need","n't"],"needn't've":["need","n't","'ve"],"not've":["not","'ve"],"o'clock":["o'clock"],"oughtn't":["ought","n't"],"oughtn't've":["ought","n't","'ve"],"so've":["so","'ve"],"so's":["so","'s"],"shan't":["sha","n't"],"sha'n't":["sha'","n't"],"shan't've":["sha","n't","'ve"],"she'd":["she","'d"],"she'd've":["she","'d","'ve"],"she'll":["she","'ll"],"she'll've":["she","'ll","'ve"],"she's":["she","'s"],"should've":["should","'ve"],"shouldn't":["should","n't"],"shouldn't've":["should","n't","'ve"],"that'd":["that","'d"],"that'd've":["that","'d","'ve"],"that's":["that","'s"],thats:["that","s"],"there'd":["there","'d"],"there'd've":["there","'d","'ve"],"there's":["there","'s"],"they'd":["they","'d"],"They'd":["They","'d"],"they'd've":["they","'d","'ve"],"They'd've":["They","'d","'ve"],"they'll":["they","'ll"],"They'll":["They","'ll"],"they'll've":["they","'ll","'ve"],"They'll've":["They","'ll","'ve"],"they're":["they","'re"],"They're":["They","'re"],"they've":["they","'ve"],"They've":["They","'ve"],"to've":["to","'ve"],"wasn't":["was","n't"],"we'd":["we","'d"],"We'd":["We","'d"],"we'd've":["we","'d","'ve"],"we'll":["we","'ll"],"We'll":["We","'ll"],"we'll've":["we","'ll","'ve"],"We'll've":["We","'ll","'ve"],"we're":["we","'re"],"We're":["We","'re"],"we've":["we","'ve"],"We've":["We","'ve"],"weren't":["were","n't"],"what'll":["what","'ll"],"what'll've":["what","'ll","'ve"],"what're":["what","'re"],"what's":["what","'s"],"what've":["what","'ve"],"when's":["when","'s"],"when've":["when","'ve"],"where'd":["where","'d"],"where's":["where","'s"],"where've":["where","'ve"],"who'd":["who","'d"],"who'll":["who","'ll"],"who'll've":["who","'ll'","'ve'"],"who're":["who","'re"],"who's":["who","'s"],"who've":["who","'ve"],"why've":["why","'ve"],"why'll":["why","'ll"],"why're":["why","'re"],"why's":["why","'s"],"will've":["will","'ve"],"won't":["wo","n't"],wont:["wo","nt"],"won't've":["wo","n't","'ve"],"would've":["would","'ve"],"wouldn't":["would","n't"],"wouldn't've":["would","n't","'ve"],"y'all":["y'","all"],"y'all'd":["y'","all","'d"],"y'all'd've":["y'","all","'d","'ve"],"y'all're":["y'","all","'re'"],"y'all've":["y'","all","ve"],"you'd":["you","'d"],"You'd":["You","'d"],"you'd've":["you","'d","'ve"],"You'd've":["You","'d","'ve"],"you'll":["you","'ll"],"You'll":["You","'ll"],"you'll've":["you","'ll","'ve"],"You'll've":["You","'ll","'ve"],"you're":["you","'re"],"You're":["You","'re"],"you've":["you","'ve"],"You've":["You","'ve"]},xe=/^([,([{*<"“'`‘.])/gi,Ve=/([,.!?%*>:;"'”`)\]}])$/gi;function Fe(t,e){var n;for(n=0;n<e.length;n++)t.push(e[n]);return t}function Ge(t){var e,n,r,i=[],o=[];do{De[t]||Be[t]||Ue[t]?n=!0:(e=t.split(xe)).length>1?(i.push(e[1]),t=e[2]):(e=t.split(Ve)).length>1?(t=e[0],o.push(e[1])):n=!0}while(!n);return(r=i).push(t),Fe(r,o),r}var We=function(t,e){var n,r,i,o,a,u;if(!Ye(t))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+t+"`.");if(arguments.length>1&&!Re(e))throw new TypeError("invalid argument. Second argument must be a boolean primitive. Value: `"+e+"`.");if(!t)return[];for(r=e?t.split(/(\s+)/):t.split(/\s+/),a={},i=[],u=0;u<r.length;u++)o=r[u],Ce(a,o)?Fe(i,a[o]):(Fe(i,n=Ge(o)),a[o]=n);return i},Je=j,Ke="function"==typeof Int32Array;var ke=function(t){return Ke&&t instanceof Int32Array||"[object Int32Array]"===Je(t)},ze="function"==typeof Int32Array?Int32Array:null,Xe=ke,qe=ze;var He="function"==typeof Int32Array?Int32Array:void 0,$e=function(){throw new Error("not implemented")},Qe=function(){var t,e;if("function"!=typeof qe)return!1;try{e=new qe([1,3.14,-3.14,2147483648]),t=Xe(e)&&1===e[0]&&3===e[1]&&-3===e[2]&&-2147483648===e[3]}catch(e){t=!1}return t}()?He:$e,Ze=j,tn="function"==typeof Float64Array;var en="function"==typeof Float64Array?Float64Array:null,nn=function(t){return tn&&t instanceof Float64Array||"[object Float64Array]"===Ze(t)},rn=en;var on=function(){var t,e;if("function"!=typeof rn)return!1;try{e=new rn([1,3.14,-3.14,NaN]),t=nn(e)&&1===e[0]&&3.14===e[1]&&-3.14===e[2]&&e[3]!=e[3]}catch(e){t=!1}return t};var an="function"==typeof Float64Array?Float64Array:void 0,un=function(){throw new Error("not implemented")},sn=on()?an:un,ln=Qe,fn=sn,hn=p;var cn=function(){var t,e,n,r,i,o,a;for(1===arguments.length?n=arguments[0]:2===arguments.length&&(n=arguments[0],t=arguments[1]),e=n.length,i=1,a=0;a<e;a++)i*=n[a];return r="int32"===t?new ln(i):new fn(i),(o={}).dtype=t,o.shape=n,o.strides=[n[1],1],o.offset=0,o.ndims=n.length,o.length=r.length,o.nbytes=r.byteLength,o.data=r,hn(o,"get",u),hn(o,"set",s),o;function u(t,e){var n=this.offset+t*this.strides[0]+e*this.strides[1];return this.data[n]}function s(t,e,n){return(t=this.offset+t*this.strides[0]+e*this.strides[1])>=0&&(this.data[t]=n),this}},vn=cn;var yn=function(){var t,e,n,r;for(t=vn([this.D,this.K]),n=0;n<this.D;n++)for(r=0;r<this.K;r++)e=(this.nd.get(n,r)+this.alpha)/(this.ndSum[n]+this.K*this.alpha),t.set(n,r,e);return t},dn=J.isPrimitive;var pn=function(t){return dn(t)&&t>0},gn=J.isObject;var wn=function(t){return gn(t)&&t.valueOf()>0},mn=pn,bn=wn;var En=p,An=function(t){return mn(t)||bn(t)},Tn=wn;En(An,"isPrimitive",pn),En(An,"isObject",Tn);var On=An,Mn=Rt;var Nn=function(t){return"object"==typeof t&&null!==t&&!Mn(t)},_n=/./;var Pn="object"==typeof self?self:null,Sn="object"==typeof window?window:null,In=Le.isPrimitive,jn=function(){return new Function("return this;")()},Ln=Pn,Rn=Sn,Yn="object"==typeof t?t:null;var Cn=function(t){if(arguments.length){if(!In(t))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+t+"`.");if(t)return jn()}if(Ln)return Ln;if(Rn)return Rn;if(Yn)return Yn;throw new Error("unexpected error. Unable to resolve global object.")},Bn=Cn(),Dn=Bn.document&&Bn.document.childNodes,Un=Int8Array,xn=_n,Vn=Dn,Fn=Un;var Gn=function(){return"function"==typeof xn||"object"==typeof Fn||"function"==typeof Vn};var Wn=function(){return/^\s*function\s*([^(]*)/i},Jn=Wn;p(Jn,"REGEXP",Wn());var Kn=Jn;var kn=function(t){return null!==t&&"object"==typeof t};p(kn,"isObjectLikeArray",Ct(kn));var zn=kn;var Xn=j,qn=Kn.REGEXP,Hn=function(t){return zn(t)&&(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))};var $n=function(t){var e,n,r;if(("Object"===(n=Xn(t).slice(8,-1))||"Error"===n)&&t.constructor){if("string"==typeof(r=t.constructor).name)return r.name;if(e=qn.exec(r.toString()))return e[1]}return Hn(t)?"Buffer":n},Qn=$n,Zn=Qn;var tr=function(t){var e;return null===t?"null":"object"===(e=typeof t)?Zn(t).toLowerCase():e},er=Qn;var nr=tr,rr=function(t){return er(t).toLowerCase()},ir=Gn()?rr:nr;var or=function(t){return"function"===ir(t)},ar=Object.getPrototypeOf;var ur=function(t){return t.__proto__},sr=j,lr=ur;var fr=function(t){var e=lr(t);return e||null===e?e:"[object Function]"===sr(t.constructor)?t.constructor.prototype:t instanceof Object?Object.prototype:null},hr=ar,cr=fr,vr=or(Object.getPrototypeOf)?hr:cr;var yr=function(t){return null==t?null:(t=Object(t),vr(t))},dr=Nn,pr=or,gr=yr,wr=O,mr=j,br=Object.prototype;var Er=function(t){var e;return!!dr(t)&&(!(e=gr(t))||!wr(t,"constructor")&&wr(e,"constructor")&&pr(e.constructor)&&"[object Function]"===mr(e.constructor)&&wr(e,"isPrototypeOf")&&pr(e.isPrototypeOf)&&(e===br||function(t){var e;for(e in t)if(!wr(t,e))return!1;return!0}(t)))},Ar=Er,Tr=On.isPrimitive,Or=Ar,Mr=O;var Nr=function(t,e){return Or(e)?Mr(e,"alpha")&&(t.alpha=e.alpha,!Tr(t.alpha))?new TypeError("invalid option. `alpha` option must be a positive number. Option: `"+t.alpha+"`."):Mr(e,"beta")&&(t.beta=e.beta,!Tr(t.beta))?new TypeError("invalid option. `beta` option must be a positive number. Option: `"+t.beta+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+e+"`.")},_r=cn;var Pr=function(){var t,e,n,r;for(t=_r([this.K,this.W]),n=0;n<this.K;n++)for(r=0;r<this.W;r++)e=(this.nw.get(r,n)+this.beta)/(this.nwSum[n]+this.W*this.beta),t.set(n,r,e);return t},Sr=v;var Ir=function(t,e,n){Sr(t,e,{configurable:!1,enumerable:!1,get:n})},jr=Ir,Lr=v;var Rr=function(t,e,n,r){Lr(t,e,{configurable:!1,enumerable:!1,get:n,set:r})},Yr=Rr;var Cr=function(){};var Br=or,Dr=Kn.REGEXP,Ur=function(){return"foo"===Cr.name}();var xr=function(t){if(!1===Br(t))throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return Ur?t.name:Dr.exec(t.toString())[1]},Vr=j,Fr="function"==typeof Int8Array;var Gr="function"==typeof Int8Array?Int8Array:null,Wr=function(t){return Fr&&t instanceof Int8Array||"[object Int8Array]"===Vr(t)},Jr=Gr;var Kr="function"==typeof Int8Array?Int8Array:void 0,kr=function(){throw new Error("not implemented")},zr=function(){var t,e;if("function"!=typeof Jr)return!1;try{e=new Jr([1,3.14,-3.14,128]),t=Wr(e)&&1===e[0]&&3===e[1]&&-3===e[2]&&-128===e[3]}catch(e){t=!1}return t}()?Kr:kr,Xr=j,qr="function"==typeof Uint8Array;var Hr="function"==typeof Uint8Array?Uint8Array:null,$r=function(t){return qr&&t instanceof Uint8Array||"[object Uint8Array]"===Xr(t)},Qr=Hr;var Zr="function"==typeof Uint8Array?Uint8Array:void 0,ti=function(){throw new Error("not implemented")},ei=function(){var t,e;if("function"!=typeof Qr)return!1;try{e=new Qr(e=[1,3.14,-3.14,256,257]),t=$r(e)&&1===e[0]&&3===e[1]&&253===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Zr:ti,ni=j,ri="function"==typeof Uint8ClampedArray;var ii="function"==typeof Uint8ClampedArray?Uint8ClampedArray:null,oi=function(t){return ri&&t instanceof Uint8ClampedArray||"[object Uint8ClampedArray]"===ni(t)},ai=ii;var ui="function"==typeof Uint8ClampedArray?Uint8ClampedArray:void 0,si=function(){throw new Error("not implemented")},li=function(){var t,e;if("function"!=typeof ai)return!1;try{e=new ai([-1,0,1,3.14,4.99,255,256]),t=oi(e)&&0===e[0]&&0===e[1]&&1===e[2]&&3===e[3]&&5===e[4]&&255===e[5]&&255===e[6]}catch(e){t=!1}return t}()?ui:si,fi=j,hi="function"==typeof Int16Array;var ci="function"==typeof Int16Array?Int16Array:null,vi=function(t){return hi&&t instanceof Int16Array||"[object Int16Array]"===fi(t)},yi=ci;var di="function"==typeof Int16Array?Int16Array:void 0,pi=function(){throw new Error("not implemented")},gi=function(){var t,e;if("function"!=typeof yi)return!1;try{e=new yi([1,3.14,-3.14,32768]),t=vi(e)&&1===e[0]&&3===e[1]&&-3===e[2]&&-32768===e[3]}catch(e){t=!1}return t}()?di:pi,wi=j,mi="function"==typeof Uint16Array;var bi="function"==typeof Uint16Array?Uint16Array:null,Ei=function(t){return mi&&t instanceof Uint16Array||"[object Uint16Array]"===wi(t)},Ai=bi;var Ti="function"==typeof Uint16Array?Uint16Array:void 0,Oi=function(){throw new Error("not implemented")},Mi=function(){var t,e;if("function"!=typeof Ai)return!1;try{e=new Ai(e=[1,3.14,-3.14,65536,65537]),t=Ei(e)&&1===e[0]&&3===e[1]&&65533===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Ti:Oi,Ni=j,_i="function"==typeof Uint32Array;var Pi=function(t){return _i&&t instanceof Uint32Array||"[object Uint32Array]"===Ni(t)},Si="function"==typeof Uint32Array?Uint32Array:null,Ii=Pi,ji=Si;var Li="function"==typeof Uint32Array?Uint32Array:void 0,Ri=function(){throw new Error("not implemented")},Yi=function(){var t,e;if("function"!=typeof ji)return!1;try{e=new ji(e=[1,3.14,-3.14,4294967296,4294967297]),t=Ii(e)&&1===e[0]&&3===e[1]&&4294967293===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Li:Ri,Ci=j,Bi="function"==typeof Float32Array;var Di="function"==typeof Float32Array?Float32Array:null,Ui=function(t){return Bi&&t instanceof Float32Array||"[object Float32Array]"===Ci(t)},xi=K,Vi=Di;var Fi="function"==typeof Float32Array?Float32Array:void 0,Gi=function(){throw new Error("not implemented")},Wi=function(){var t,e;if("function"!=typeof Vi)return!1;try{e=new Vi([1,3.14,-3.14,5e40]),t=Ui(e)&&1===e[0]&&3.140000104904175===e[1]&&-3.140000104904175===e[2]&&e[3]===xi}catch(e){t=!1}return t}()?Fi:Gi,Ji=Qn,Ki=xr,ki=yr,zi=sn,Xi=[sn,Wi,Qe,Yi,gi,Mi,zr,ei,li],qi=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],Hi=on()?ki(zi):$i;function $i(){}Hi="TypedArray"===Ki(Hi)?Hi:$i;var Qi=function(t,e){if("function"!=typeof e)throw new TypeError("invalid argument. `constructor` argument must be callable. Value: `"+e+"`.");return t instanceof e},Zi=Qn,to=yr,eo=[[sn,"Float64Array"],[Wi,"Float32Array"],[Qe,"Int32Array"],[Yi,"Uint32Array"],[gi,"Int16Array"],[Mi,"Uint16Array"],[zr,"Int8Array"],[ei,"Uint8Array"],[li,"Uint8ClampedArray"]];var no=function(t){var e,n;if("object"!=typeof t||null===t)return!1;if(t instanceof Hi)return!0;for(n=0;n<Xi.length;n++)if(t instanceof Xi[n])return!0;for(;t;){for(e=Ji(t),n=0;n<qi.length;n++)if(qi[n]===e)return!0;t=ki(t)}return!1},ro=function(t){var e,n;for(n=0;n<eo.length;n++)if(Qi(t,eo[n][0]))return eo[n][1];for(;t;){for(e=Zi(t),n=0;n<eo.length;n++)if(e===eo[n][1])return eo[n][1];t=to(t)}};var io=function(t){var e,n;if(!no(t))throw new TypeError("invalid argument. Must provide a typed array. Value: `"+t+"`.");for((e={}).type=ro(t),e.data=[],n=0;n<t.length;n++)e.data.push(t[n]);return e},oo={name:"mt19937",copy:!0};var ao=function(t,e,n,r,i){var o,a,u,s;if(t<=0)return r;if(1===n&&1===i){if((u=t%8)>0)for(s=0;s<u;s++)r[s]=e[s];if(t<8)return r;for(s=u;s<t;s+=8)r[s]=e[s],r[s+1]=e[s+1],r[s+2]=e[s+2],r[s+3]=e[s+3],r[s+4]=e[s+4],r[s+5]=e[s+5],r[s+6]=e[s+6],r[s+7]=e[s+7];return r}for(o=n<0?(1-t)*n:0,a=i<0?(1-t)*i:0,s=0;s<t;s++)r[a]=e[o],o+=n,a+=i;return r};var uo=function(t,e,n,r,i,o,a){var u,s,l,f;if(t<=0)return i;if(u=r,s=a,1===n&&1===o){if((l=t%8)>0)for(f=0;f<l;f++)i[s]=e[u],u+=n,s+=o;if(t<8)return i;for(f=l;f<t;f+=8)i[s]=e[u],i[s+1]=e[u+1],i[s+2]=e[u+2],i[s+3]=e[u+3],i[s+4]=e[u+4],i[s+5]=e[u+5],i[s+6]=e[u+6],i[s+7]=e[u+7],u+=8,s+=8;return i}for(f=0;f<t;f++)i[s]=e[u],u+=n,s+=o;return i},so=ao;p(so,"ndarray",uo);var lo=so,fo=z;var ho=function(){return 0|fo(1+2147483646*Math.random())},co=p,vo=jr,yo=Yr,po=O,go=Ar,wo=Le.isPrimitive,mo=re,bo=jt.isPrimitive,Eo=ke,Ao=Qe,To=lo,Oo=io,Mo=ho;function No(t,e){var n;return n=e?"option":"argument",t.length<6?new RangeError("invalid "+n+". `state` array has insufficient length."):1!==t[0]?new RangeError("invalid "+n+". `state` array has an incompatible schema version. Expected: 1. Actual: "+t[0]+"."):2!==t[1]?new RangeError("invalid "+n+". `state` array has an incompatible number of sections. Expected: 2. Actual: "+t[1]+"."):1!==t[2]?new RangeError("invalid "+n+". `state` array has an incompatible state length. Expected: "+1..toString()+". Actual: "+t[2]+"."):t[4]!==t.length-5?new RangeError("invalid "+n+". `state` array length is incompatible with seed section length. Expected: "+(t.length-5)+". Actual: "+t[4]+"."):null}var _o=function(t){var e,n,r,i,o,a;if(r={},arguments.length){if(!go(t))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.");if(po(t,"copy")&&(r.copy=t.copy,!wo(t.copy)))throw new TypeError("invalid option. `copy` option must be a boolean. Option: `"+t.copy+"`.");if(po(t,"state")){if(n=t.state,r.state=!0,!Eo(n))throw new TypeError("invalid option. `state` option must be an Int32Array. Option: `"+n+"`.");if(a=No(n,!0))throw a;!1===r.copy?e=n:(e=new Ao(n.length),To(n.length,n,1,e,1)),n=new Ao(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,1),i=new Ao(e.buffer,e.byteOffset+5*e.BYTES_PER_ELEMENT,n[4])}if(void 0===i)if(po(t,"seed"))if(i=t.seed,r.seed=!0,bo(i)){if(i>2147483646)throw new RangeError("invalid option. `seed` option must be a positive integer less than the maximum signed 32-bit integer. Option: `"+i+"`.");i|=0}else{if(!(mo(i)&&i.length>0))throw new TypeError("invalid option. `seed` option must be either a positive integer less than the maximum signed 32-bit integer or an array-like object containing integer values less than the maximum signed 32-bit integer. Option: `"+i+"`.");o=i.length,(e=new Ao(5+o))[0]=1,e[1]=2,e[2]=1,e[4]=o,To.ndarray(o,i,1,0,e,1,5),n=new Ao(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,1),i=new Ao(e.buffer,e.byteOffset+5*e.BYTES_PER_ELEMENT,o),n[0]=i[0]}else i=0|Mo()}else i=0|Mo();return void 0===n&&((e=new Ao(6))[0]=1,e[1]=2,e[2]=1,e[4]=1,e[5]=i,n=new Ao(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,1),i=new Ao(e.buffer,e.byteOffset+5*e.BYTES_PER_ELEMENT,1),n[0]=i[0]),co(y,"NAME","minstd"),vo(y,"seed",u),vo(y,"seedLength",s),yo(y,"state",h,c),vo(y,"stateLength",l),vo(y,"byteLength",f),co(y,"toJSON",v),co(y,"MIN",1),co(y,"MAX",2147483646),co(y,"normalized",d),co(d,"NAME",y.NAME),vo(d,"seed",u),vo(d,"seedLength",s),yo(d,"state",h,c),vo(d,"stateLength",l),vo(d,"byteLength",f),co(d,"toJSON",v),co(d,"MIN",(y.MIN-1)/2147483646),co(d,"MAX",(y.MAX-1)/2147483646),y;function u(){var t=e[4];return To(t,i,1,new Ao(t),1)}function s(){return e[4]}function l(){return e.length}function f(){return e.byteLength}function h(){var t=e.length;return To(t,e,1,new Ao(t),1)}function c(t){var o;if(!Eo(t))throw new TypeError("invalid argument. Must provide an Int32Array. Value: `"+t+"`.");if(o=No(t,!1))throw o;!1===r.copy?r.state&&t.length===e.length?To(t.length,t,1,e,1):(e=t,r.state=!0):(t.length!==e.length&&(e=new Ao(t.length)),To(t.length,t,1,e,1)),n=new Ao(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,1),i=new Ao(e.buffer,e.byteOffset+5*e.BYTES_PER_ELEMENT,e[4])}function v(){var t={type:"PRNG"};return t.name=y.NAME,t.state=Oo(e),t.params=[],t}function y(){var t=0|n[0];return t=16807*t%2147483647|0,n[0]=t,0|t}function d(){return(y()-1)/2147483646}},Po=_o({seed:ho()});p(Po,"factory",_o);var So=Po,Io=ie;var jo=function(t,e,n){var r,i;for(i=0;i<8;i++)if(r=t(),Io(r))throw new Error("unexpected error. PRNG returned `NaN`.");for(i=n-1;i>=0;i--)e[i]=t();return e},Lo=z;var Ro=function(){return 0|Lo(1+2147483646*Math.random())},Yo=p,Co=jr,Bo=Yr,Do=O,Uo=Ar,xo=Le.isPrimitive,Vo=re,Fo=jt.isPrimitive,Go=ke,Wo=lo,Jo=z,Ko=Qe,ko=io,zo=jo,Xo=Ro;function qo(t,e){var n;return n=e?"option":"argument",t.length<40?new RangeError("invalid "+n+". `state` array has insufficient length."):1!==t[0]?new RangeError("invalid "+n+". `state` array has an incompatible schema version. Expected: 1. Actual: "+t[0]+"."):3!==t[1]?new RangeError("invalid "+n+". `state` array has an incompatible number of sections. Expected: 3. Actual: "+t[1]+"."):32!==t[2]?new RangeError("invalid "+n+". `state` array has an incompatible table length. Expected: 32. Actual: "+t[2]+"."):2!==t[35]?new RangeError("invalid "+n+". `state` array has an incompatible state length. Expected: "+2..toString()+". Actual: "+t[35]+"."):t[38]!==t.length-39?new RangeError("invalid "+n+". `state` array length is incompatible with seed section length. Expected: "+(t.length-39)+". Actual: "+t[38]+"."):null}var Ho=function(t){var e,n,r,i,o,a;if(r={},arguments.length){if(!Uo(t))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.");if(Do(t,"copy")&&(r.copy=t.copy,!xo(t.copy)))throw new TypeError("invalid option. `copy` option must be a boolean. Option: `"+t.copy+"`.");if(Do(t,"state")){if(n=t.state,r.state=!0,!Go(n))throw new TypeError("invalid option. `state` option must be an Int32Array. Option: `"+n+"`.");if(a=qo(n,!0))throw a;!1===r.copy?e=n:(e=new Ko(n.length),Wo(n.length,n,1,e,1)),n=new Ko(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,32),i=new Ko(e.buffer,e.byteOffset+39*e.BYTES_PER_ELEMENT,n[38])}if(void 0===i)if(Do(t,"seed"))if(i=t.seed,r.seed=!0,Fo(i)){if(i>2147483646)throw new RangeError("invalid option. `seed` option must be a positive integer less than the maximum signed 32-bit integer. Option: `"+i+"`.");i|=0}else{if(!(Vo(i)&&i.length>0))throw new TypeError("invalid option. `seed` option must be either a positive integer less than the maximum signed 32-bit integer or an array-like object containing integer values less than the maximum signed 32-bit integer. Option: `"+i+"`.");o=i.length,(e=new Ko(39+o))[0]=1,e[1]=3,e[2]=32,e[35]=2,e[37]=i[0],e[38]=o,Wo.ndarray(o,i,1,0,e,1,39),n=new Ko(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,32),i=new Ko(e.buffer,e.byteOffset+39*e.BYTES_PER_ELEMENT,o),n=zo(y,n,32),e[36]=n[0]}else i=0|Xo()}else i=0|Xo();return void 0===n&&((e=new Ko(40))[0]=1,e[1]=3,e[2]=32,e[35]=2,e[37]=i,e[38]=1,e[39]=i,n=new Ko(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,32),i=new Ko(e.buffer,e.byteOffset+39*e.BYTES_PER_ELEMENT,1),n=zo(y,n,32),e[36]=n[0]),Yo(d,"NAME","minstd-shuffle"),Co(d,"seed",u),Co(d,"seedLength",s),Bo(d,"state",h,c),Co(d,"stateLength",l),Co(d,"byteLength",f),Yo(d,"toJSON",v),Yo(d,"MIN",1),Yo(d,"MAX",2147483646),Yo(d,"normalized",p),Yo(p,"NAME",d.NAME),Co(p,"seed",u),Co(p,"seedLength",s),Bo(p,"state",h,c),Co(p,"stateLength",l),Co(p,"byteLength",f),Yo(p,"toJSON",v),Yo(p,"MIN",(d.MIN-1)/2147483646),Yo(p,"MAX",(d.MAX-1)/2147483646),d;function u(){var t=e[38];return Wo(t,i,1,new Ko(t),1)}function s(){return e[38]}function l(){return e.length}function f(){return e.byteLength}function h(){var t=e.length;return Wo(t,e,1,new Ko(t),1)}function c(t){var o;if(!Go(t))throw new TypeError("invalid argument. Must provide an Int32Array. Value: `"+t+"`.");if(o=qo(t,!1))throw o;!1===r.copy?r.state&&t.length===e.length?Wo(t.length,t,1,e,1):(e=t,r.state=!0):(t.length!==e.length&&(e=new Ko(t.length)),Wo(t.length,t,1,e,1)),n=new Ko(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,32),i=new Ko(e.buffer,e.byteOffset+39*e.BYTES_PER_ELEMENT,e[38])}function v(){var t={type:"PRNG"};return t.name=d.NAME,t.state=ko(e),t.params=[],t}function y(){var t=0|e[37];return t=16807*t%2147483647|0,e[37]=t,0|t}function d(){var t,r;return t=e[36],r=Jo(t/2147483647*32),t=n[r],e[36]=t,n[r]=y(),t}function p(){return(d()-1)/2147483646}},$o=Ho({seed:Ro()});p($o,"factory",Ho);var Qo=$o,Zo=K;var ta=function(t){return 0===t&&1/t===Zo},ea=ie,na=k,ra=K;var ia=z;var oa=function(){return ia(1+4294967294*Math.random())>>>0},aa=p,ua=jr,sa=Yr,la=O,fa=Ar,ha=re,ca=Pi,va=Le.isPrimitive,ya=jt.isPrimitive,da=Yi,pa=function(t,e){var n,r,i,o;if(2===(n=arguments.length))return ea(t)||ea(e)?NaN:t===ra||e===ra?ra:t===e&&0===t?ta(t)?t:e:t>e?t:e;for(r=na,o=0;o<n;o++){if(ea(i=arguments[o])||i===ra)return i;(i>r||i===r&&0===i&&ta(i))&&(r=i)}return r},ga=function(t,e){var n,r;return((n=(65535&(t>>>=0))>>>0)*(r=(65535&(e>>>=0))>>>0)>>>0)+((t>>>16>>>0)*r+n*(e>>>16>>>0)<<16>>>0)>>>0},wa=lo,ma=io,ba=oa,Ea=624,Aa=[0,2567483615];function Ta(t,e){var n;return n=e?"option":"argument",t.length<631?new RangeError("invalid "+n+". `state` array has insufficient length."):1!==t[0]?new RangeError("invalid "+n+". `state` array has an incompatible schema version. Expected: 1. Actual: "+t[0]+"."):3!==t[1]?new RangeError("invalid "+n+". `state` array has an incompatible number of sections. Expected: 3. Actual: "+t[1]+"."):t[2]!==Ea?new RangeError("invalid "+n+". `state` array has an incompatible state length. Expected: "+Ea+". Actual: "+t[2]+"."):1!==t[627]?new RangeError("invalid "+n+". `state` array has an incompatible section length. Expected: "+1..toString()+". Actual: "+t[627]+"."):t[629]!==t.length-630?new RangeError("invalid "+n+". `state` array length is incompatible with seed section length. Expected: "+(t.length-630)+". Actual: "+t[629]+"."):null}function Oa(t,e,n){var r;for(t[0]=n>>>0,r=1;r<e;r++)n=((n=t[r-1]>>>0)^n>>>30)>>>0,t[r]=ga(n,1812433253)+r>>>0;return t}function Ma(t,e,n,r){var i,o,a,u;for(o=1,a=0,u=pa(e,r);u>0;u--)i=t[o-1]>>>0,i=ga(i=(i^i>>>30)>>>0,1664525)>>>0,t[o]=(t[o]>>>0^i)+n[a]+a>>>0,a+=1,(o+=1)>=e&&(t[0]=t[e-1],o=1),a>=r&&(a=0);for(u=e-1;u>0;u--)i=t[o-1]>>>0,i=ga(i=(i^i>>>30)>>>0,1566083941)>>>0,t[o]=(t[o]>>>0^i)-o>>>0,(o+=1)>=e&&(t[0]=t[e-1],o=1);return t[0]=2147483648,t}function Na(t){var e,n;for(227,n=0;n<227;n++)e=2147483648&t[n]|2147483647&t[n+1],t[n]=t[n+397]^e>>>1^Aa[1&e];for(623;n<623;n++)e=2147483648&t[n]|2147483647&t[n+1],t[n]=t[n-227]^e>>>1^Aa[1&e];return e=2147483648&t[623]|2147483647&t[0],t[623]=t[396]^e>>>1^Aa[1&e],t}var _a=function(t){var e,n,r,i,o,a;if(r={},arguments.length){if(!fa(t))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.");if(la(t,"copy")&&(r.copy=t.copy,!va(t.copy)))throw new TypeError("invalid option. `copy` option must be a boolean. Option: `"+t.copy+"`.");if(la(t,"state")){if(n=t.state,r.state=!0,!ca(n))throw new TypeError("invalid option. `state` option must be a Uint32Array. Option: `"+n+"`.");if(a=Ta(n,!0))throw a;!1===r.copy?e=n:(e=new da(n.length),wa(n.length,n,1,e,1)),n=new da(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,Ea),i=new da(e.buffer,e.byteOffset+630*e.BYTES_PER_ELEMENT,n[629])}if(void 0===i)if(la(t,"seed"))if(i=t.seed,r.seed=!0,ya(i)){if(i>4294967295)throw new RangeError("invalid option. `seed` option must be a positive integer less than or equal to the maximum unsigned 32-bit integer. Option: `"+i+"`.");i>>>=0}else{if(!1===ha(i)||i.length<1)throw new TypeError("invalid option. `seed` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `"+i+"`.");if(1===i.length){if(i=i[0],!ya(i))throw new TypeError("invalid option. `seed` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `"+i+"`.");if(i>4294967295)throw new RangeError("invalid option. `seed` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `"+i+"`.");i>>>=0}else o=i.length,(e=new da(630+o))[0]=1,e[1]=3,e[2]=Ea,e[627]=1,e[628]=Ea,e[629]=o,wa.ndarray(o,i,1,0,e,1,630),n=new da(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,Ea),i=new da(e.buffer,e.byteOffset+630*e.BYTES_PER_ELEMENT,o),n=Ma(n=Oa(n,Ea,19650218),Ea,i,o)}else i=ba()>>>0}else i=ba()>>>0;return void 0===n&&((e=new da(631))[0]=1,e[1]=3,e[2]=Ea,e[627]=1,e[628]=Ea,e[629]=1,e[630]=i,n=new da(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,Ea),i=new da(e.buffer,e.byteOffset+630*e.BYTES_PER_ELEMENT,1),n=Oa(n,Ea,i)),aa(y,"NAME","mt19937"),ua(y,"seed",u),ua(y,"seedLength",s),sa(y,"state",h,c),ua(y,"stateLength",l),ua(y,"byteLength",f),aa(y,"toJSON",v),aa(y,"MIN",1),aa(y,"MAX",4294967295),aa(y,"normalized",d),aa(d,"NAME",y.NAME),ua(d,"seed",u),ua(d,"seedLength",s),sa(d,"state",h,c),ua(d,"stateLength",l),ua(d,"byteLength",f),aa(d,"toJSON",v),aa(d,"MIN",0),aa(d,"MAX",.9999999999999999),y;function u(){var t=e[629];return wa(t,i,1,new da(t),1)}function s(){return e[629]}function l(){return e.length}function f(){return e.byteLength}function h(){var t=e.length;return wa(t,e,1,new da(t),1)}function c(t){var o;if(!ca(t))throw new TypeError("invalid argument. Must provide a Uint32Array. Value: `"+t+"`.");if(o=Ta(t,!1))throw o;!1===r.copy?r.state&&t.length===e.length?wa(t.length,t,1,e,1):(e=t,r.state=!0):(t.length!==e.length&&(e=new da(t.length)),wa(t.length,t,1,e,1)),n=new da(e.buffer,e.byteOffset+3*e.BYTES_PER_ELEMENT,Ea),i=new da(e.buffer,e.byteOffset+630*e.BYTES_PER_ELEMENT,e[629])}function v(){var t={type:"PRNG"};return t.name=y.NAME,t.state=ma(e),t.params=[],t}function y(){var t,r;return(r=e[628])>=Ea&&(n=Na(n),r=0),t=n[r],e[628]=r+1,t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0}function d(){return 11102230246251565e-32*(67108864*(y()>>>5)+(y()>>>6))}},Pa=_a({seed:oa()});p(Pa,"factory",_a);var Sa=Pa,Ia={};Ia.minstd=So,Ia["minstd-shuffle"]=Qo,Ia.mt19937=Sa;var ja=p,La=jr,Ra=Yr,Ya=Ar,Ca=Le.isPrimitive,Ba=O,Da=io,Ua=oo,xa=Ia;var Va=function(t){var e,n,r;if(e={name:Ua.name,copy:Ua.copy},arguments.length){if(!Ya(t))throw new TypeError("invalid argument. Must provide an object. Value: `"+t+"`.");if(Ba(t,"name")&&(e.name=t.name),Ba(t,"state")){if(e.state=t.state,void 0===e.state)throw new TypeError("invalid option. `state` option cannot be undefined. Option: `"+e.state+"`.")}else if(Ba(t,"seed")&&(e.seed=t.seed,void 0===e.seed))throw new TypeError("invalid option. `seed` option cannot be undefined. Option: `"+e.seed+"`.");if(Ba(t,"copy")&&(e.copy=t.copy,!Ca(e.copy)))throw new TypeError("invalid option. `copy` option must be a boolean. Option: `"+e.copy+"`.")}if(void 0===(r=xa[e.name]))throw new Error("invalid option. Unrecognized/unsupported PRNG. Option: `"+e.name+"`.");return n=void 0===e.state?void 0===e.seed?r.factory():r.factory({seed:e.seed}):r.factory({state:e.state,copy:e.copy}),ja(h,"NAME","randu"),La(h,"seed",i),La(h,"seedLength",o),Ra(h,"state",s,l),La(h,"stateLength",a),La(h,"byteLength",u),ja(h,"toJSON",f),ja(h,"PRNG",n),ja(h,"MIN",n.normalized.MIN),ja(h,"MAX",n.normalized.MAX),h;function i(){return n.seed}function o(){return n.seedLength}function a(){return n.stateLength}function u(){return n.byteLength}function s(){return n.state}function l(t){n.state=t}function f(){var t={type:"PRNG"};return t.name=h.NAME+"-"+n.NAME,t.state=Da(n.state),t.params=[],t}function h(){return n.normalized()}},Fa=Va();p(Fa,"factory",Va);var Ga=Fa,Wa=z;var Ja=cn;var Ka=function(t,e,n){var r,i,o,a,u,s,l,f;for(o=t.shape[0],a=t.shape[1],s=Ja([o,a]),r=(n-1)/n,i=1/n,l=0;l<o;l++)for(f=0;f<a;f++)u=r*t.get(l,f)+i*e.get(l,f),s.set(l,f,u);return s},ka=jt,za=Fa,Xa=Ka;var qa=Et,Ha=jt,$a=Qt,Qa=ee,Za=be,tu=We,eu=Qe,nu=cn,ru=yn,iu=Nr,ou=Pr,au=function(){var t,e,n,r,i,o;for(this.z=[],i=0;i<this.D;i++){for(this.z.push([]),n=this.w[i].length,o=0;o<n;o++)e=Wa(Ga()*this.K),this.z[i].push(e);for(this.ndSum[i]=n,o=0;o<n;o++)r=this.w[i][o],t=this.z[i][o],this.nw.set(r,t,this.nw.get(r,t)+1),this.nd.set(i,t,this.nd.get(i,t)+1),this.nwSum[t]=this.nwSum[t]+1}},uu=function(t,e,n){var r,i,o,a,u,s,l,f,h,c,v,y,d,p;if(!ka(t))throw new TypeError("invalid argument. First argument must be a positive integer. Value: `"+t+"`.");if(!ka(e))throw new TypeError("invalid argument. Second argument must be a positive integer. Value: `"+e+"`.");if(!ka(n))throw new TypeError("invalid argument. Third argument must be a positive integer. Value: `"+n+"`.");for(i=this.W*this.beta,r=this.K*this.alpha,v=0;v<t;v++){for(c=0;c<this.D;c++)for(p=0;p<this.ndSum[c];p++){for(s=this.w[c][p],o=this.z[c][p],this.nw.set(s,o,this.nw.get(s,o)-1),this.nd.set(c,o,this.nd.get(c,o)-1),this.ndSum[c]-=1,this.nwSum[o]-=1,u=[],y=0;y<this.K;y++)u.push((this.nw.get(s,y)+this.beta)/(this.nwSum[y]+i)*(this.nd.get(c,y)+this.alpha)/(this.ndSum[c]+r));for(y=1;y<this.K;y++)u[y]+=u[y-1];for(d=u[this.K-1]*za(),o=0,h=0;h<this.K;h++)if(u[h]>d){o=h;break}this.nw.set(s,o,this.nw.get(s,o)+1),this.nd.set(c,o,this.nd.get(c,o)+1),this.nwSum[o]+=1,this.ndSum[c]+=1,this.z[c][p]=o}v%n==0&&v>e&&(l=this.getPhis(),a=this.getThetas(),this.phiList.push(l),this.thetaList.push(a),f=this.phiList.length,this.avgPhi=1===f?l:Xa(this.avgPhi,l,f),f=this.thetaList.length,this.avgTheta=1===f?a:Xa(this.avgTheta,a,f))}};function su(t,e){var n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var lu=function(t,e,n){var r,i,o,a,u,s,l,f,h,c,v,y,d,p,g,w,m;if(!$a(t))throw new TypeError("invalid argument. First argument must be a string array. Value: `"+t+"`.");if(!Ha(e))throw new TypeError("invalid argument. Number of topics `K` must be a positive integer. Value: `"+e+"`.");if(s={},arguments.length>2&&(l=iu(s,n)))throw l;for(y=t.length,a=s.alpha||50/e,u=s.beta||.1,i=[],m=[],f=0,d=0;d<y;d++)for(m.push([]),h=(v=tu(t[d])).length,p=0;p<h;p++)r=v[p],-1===(c=su(i,r))?(i.push(r),m[d].push(f),f+=1):m[d].push(c);return w=i.length,Qa(o={},"K",e),Qa(o,"D",y),Qa(o,"W",w),Qa(o,"alpha",a),Qa(o,"beta",u),Qa(o,"init",au),Qa(o,"fit",uu),Qa(o,"getPhis",ou),Qa(o,"getThetas",ru),Qa(o,"getTerms",b),o.nwSum=new eu(e),o.ndSum=new eu(y),o.nw=nu([w,e],"int32"),o.nd=nu([y,e],"int32"),o.phiList=[],o.thetaList=[],o.w=m,o.init(),o;function b(t,n){var r,o,a,u,s,l;if(!qa(t)||t>=e)throw new TypeError("invalid argument. First argument must be a nonnegative integer smaller than the total number of topics. Value: `"+t+"`.");if(n){if(!Ha(n))throw new TypeError("invalid argument. Second argument must be a positive integer. Value: `"+n+"`.")}else n=10;for(a=[],r=[],l=0;l<n;l++){for(u=0,g=0;g<this.W;g++)(o=this.avgPhi.get(t,g))>u&&!Za(r,g)&&(u=o,s=g);r.push(s),a.push({word:i[s],prob:u})}return a}},fu=lu;export{fu as default};
//# sourceMappingURL=mod.js.map
